"use strict";function doMini(){miniPhotos[0].style.backgroundImage="url('"+value[number-1]+"')",miniPhotos[1].style.backgroundImage="url('"+value[number]+"')",miniPhotos[1].style.opacity="1",miniPhotos[2].style.backgroundImage="url('"+value[number+1]+"')","undefined"==typeof value[number-1]?(miniPhotos[0].style.opacity="1",miniPhotos[1].style.opacity="0.4",miniPhotos[0].style.backgroundImage="url('"+value[number]+"')",miniPhotos[1].style.backgroundImage="url('"+value[number+1]+"')",miniPhotos[2].style.backgroundImage="url('"+value[number+2]+"')",left.style.opacity="0",left.style.cursor="auto",left.removeEventListener("click",moveLeft)):(left.style.opacity="",left.style.cursor="",left.addEventListener("click",moveLeft)),"undefined"==typeof value[number+1]?(miniPhotos[2].style.opacity="1",miniPhotos[1].style.opacity="0.4",miniPhotos[0].style.backgroundImage="url('"+value[number-2]+"')",miniPhotos[1].style.backgroundImage="url('"+value[number-1]+"')",miniPhotos[2].style.backgroundImage="url('"+value[number]+"')",right.style.opacity="0",right.style.cursor="auto",right.removeEventListener("click",moveRight)):(miniPhotos[2].style.display="",right.style.opacity="",right.style.cursor="",right.addEventListener("click",moveRight))}function clearOpacity(){for(var a=0;a<miniPhotos.length;a++)miniPhotos[a].style.opacity="0.4"}function detectEdge(){var a=window.navigator.userAgent,b=a.indexOf("Edge/");return b>0&&parseInt(a.substring(b+5,a.indexOf(".",b)),10)}function getStyle(a){return window.getComputedStyle?getComputedStyle(a,""):a.currentStyle}function miniPhoto(a){var b=a.target;if("SPAN"===b.tagName){var c=getStyle(b).backgroundImage;photo=c.slice(5,c.length-2),detectEdge()&&(photo=c.slice(4,c.length-1)),value.indexOf(photo.slice(window.location.href.length,photo.length))!==-1&&(value[value.indexOf(photo.slice(window.location.href.length,photo.length))]===value[0]?(left.style.opacity="0",left.style.cursor="auto",left.removeEventListener("click",moveLeft)):(left.style.opacity="",left.style.cursor="",left.addEventListener("click",moveLeft)),value[value.indexOf(photo.slice(window.location.href.length,photo.length))]===value[value.length-1]?(right.style.opacity="0",right.style.cursor="auto",right.removeEventListener("click",moveRight)):(right.style.opacity="",right.style.cursor="",right.addEventListener("click",moveRight)),picture.src=value[value.indexOf(photo.slice(window.location.href.length,photo.length))]),clearOpacity(),b.style.opacity="1",number=value.indexOf(photo.slice(window.location.href.length,photo.length)),textPhoto.innerHTML="",textPhoto.appendChild(text[number]),calcText(),currentNumber.textContent=""+(number+1)+" "}}function calcMargin(){var a;self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight);var b=picture.height;b>730&&(b=730);var c=(a-b)/2;showBlock.style.marginTop=c+"px",showBlock.style.marginBottom=c+"px"}function calcText(){return textPhoto.style.marginTop=-textPhoto.offsetHeight/2+"px"}function moveLeft(){number-1>=0&&(number--,picture.src=value[number],picture.onload=function(){picture.style.cssText="-webkit-filter: url(#blur);        filter: url(#blur);        -webkit-filter: blur(1px);        filter: blur(1px);        filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1');        max-width: 910px;        max-height: 730px;      ",setTimeout(function(){picture.style.cssText="max-width: 910px;          max-height: 730px;        "},500),$(".md-preloader").fadeIn("slow").fadeOut("slow")},textPhoto.innerHTML="",textPhoto.appendChild(text[number]),currentNumber.textContent=""+(number+1)+" ",clearOpacity(),doMini(),calcText())}function moveRight(){number<value.length-1&&(number++,picture.src=value[number],picture.onload=function(){picture.style.cssText="-webkit-filter: url(#blur);        filter: url(#blur);        -webkit-filter: blur(1px);        filter: blur(1px);        filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1');        max-width: 910px;        max-height: 730px;      ",setTimeout(function(){picture.style.cssText="max-width: 910px;          max-height: 730px;        "},500),$(".md-preloader").fadeIn("slow").fadeOut("slow")},textPhoto.innerHTML="",textPhoto.appendChild(text[number]),currentNumber.textContent=""+(number+1)+" ",clearOpacity(),doMini(),calcText())}function handlerOn(){picture.addEventListener("load",calcMargin),left.addEventListener("click",moveLeft),right.addEventListener("click",moveRight),divWrapper.addEventListener("click",miniPhoto),document.addEventListener("keydown",pressButtons)}function handlerOf(){$(".show-image").animate({opacity:"0"},400),setTimeout(function(){show.classList.add("invisible"),preview.removeChild(picture),textPhoto.removeChild(text[number]),picture.removeEventListener("load",calcMargin),divWrapper.removeEventListener("click",miniPhoto),left.removeEventListener("click",moveLeft),right.removeEventListener("click",moveRight),document.removeEventListener("keydown",pressButtons),clearOpacity()},410)}function pressButtons(a){39===a.keyCode&&moveRight(),37===a.keyCode&&moveLeft(),27===a.keyCode&&handlerOf()}function showPhoto(a){var b=a.target;"IMG"===b.tagName&&(show.classList.remove("invisible"),$(".show-image").animate({opacity:"1"},400),picture=new Image,picture.onload=function(){picture.style.cssText="-webkit-filter: url(#blur);      filter: url(#blur);      -webkit-filter: blur(1px);      filter: blur(1px);      filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1');      max-width: 910px;      max-height: 730px;    ",setTimeout(function(){picture.style.cssText="max-width: 910px;        max-height: 730px;      "},500),$(".md-preloader").fadeIn("slow").fadeOut("slow")},picture.style.maxWidth="910px",picture.style.maxHeight="730px",photo=b.src.slice(window.location.href.length,b.src.length),value.indexOf(photo)!==-1&&(picture.src=value[value.indexOf(photo)]),preview.appendChild(picture),number=value.indexOf(photo),textPhoto.appendChild(text[number]),currentNumber.textContent=""+(number+1)+" ",totalNumber.textContent=""+value.length+" ",doMini(),calcText(),handlerOn())}for(var wrapperNode=document.querySelector(".wrapper"),img=wrapperNode.querySelectorAll("img"),show=document.querySelector(".show-image"),close=show.querySelector(".img-close"),preview=show.querySelector(".show-image-preview"),imgPreview=preview.querySelectorAll("img"),left=show.querySelector(".img-control-left"),right=show.querySelector(".img-control-right"),showBlock=show.querySelector(".show-block"),currentNumber=document.querySelector(".preview-number-current"),totalNumber=document.querySelector(".preview-number-total"),divWrapper=document.querySelector(".mini-wrapper"),miniPhotos=divWrapper.querySelectorAll(".mini-photo"),textPhoto=document.querySelector(".text-photo"),textContainer=document.querySelector(".text-container"),textImage=textContainer.querySelectorAll(".text-image"),picture,photo,number,photoData=[].slice.call(img,0),textData=[].slice.call(textImage,0),value=[],text=[],i=0;i<img.length;i++)value.push(photoData[i].src.slice(window.location.href.length,photoData[i].src.length)),text.push(textData[i]);wrapperNode.addEventListener("click",showPhoto),close.addEventListener("click",handlerOf);var container=document.querySelector(".bottom-block"),inputOne=document.getElementById("radio-all-controls"),inputTwo=document.getElementById("radio-minimal-black");inputOne.onclick=function(){preview.appendChild(container)},inputTwo.onclick=function(){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),container.remove()};