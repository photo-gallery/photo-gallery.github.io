"use strict";function doMini(){miniPhotos[0].style.backgroundImage="url('"+value[number-1]+"')",miniPhotos[1].style.backgroundImage="url('"+value[number]+"')",miniPhotos[1].style.opacity="1",miniPhotos[2].style.backgroundImage="url('"+value[number+1]+"')","undefined"==typeof value[number-1]?(miniPhotos[0].style.display="none",miniPhotos[0].style.backgroundImage='url("")'):miniPhotos[0].style.display="","undefined"==typeof value[number+1]?(miniPhotos[2].style.display="none",miniPhotos[2].style.backgroundImage='url("")'):miniPhotos[2].style.display=""}function clearOpacity(){for(var e=0;e<miniPhotos.length;e++)miniPhotos[e].style.opacity="0.4"}function detectEdge(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t)),10):!1}function getStyle(e){return window.getComputedStyle?getComputedStyle(e,""):e.currentStyle}function miniPhoto(e){var t=e.target;if("SPAN"===t.tagName){var o=getStyle(t).backgroundImage;photo=o.slice(5,o.length-2),detectEdge()&&(photo=o.slice(4,o.length-1)),picture.src=photo,clearOpacity(),t.style.opacity="1",number=value.indexOf(photo),currentNumber.textContent=""+(number+1)+" "}}function calcMargin(){var e;self.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight);var t=picture.height;t>730&&(t=730);var o=(e-t)/2;showBlock.style.marginTop=o+"px",showBlock.style.marginBottom=o+"px"}function moveLeft(){number-1>=0&&(number--,picture.src=value[number],currentNumber.textContent=""+(number+1)+" ",clearOpacity(),doMini())}function moveRight(){number<value.length-1&&(number++,picture.src=value[number],currentNumber.textContent=""+(number+1)+" ",clearOpacity(),doMini())}function handlerOn(){picture.addEventListener("load",calcMargin),left.addEventListener("click",moveLeft),right.addEventListener("click",moveRight),divWrapper.addEventListener("click",miniPhoto),document.addEventListener("keydown",pressButtons)}function handlerOf(){show.classList.add("invisible"),preview.removeChild(picture),picture.removeEventListener("load",calcMargin),divWrapper.removeEventListener("click",miniPhoto),left.removeEventListener("click",moveLeft),right.removeEventListener("click",moveRight),document.removeEventListener("keydown",pressButtons),clearOpacity()}function pressButtons(e){39===e.keyCode&&moveRight(),37===e.keyCode&&moveLeft(),27===e.keyCode&&handlerOf()}function showPhoto(e){var t=e.target;"IMG"===t.tagName&&(show.classList.remove("invisible"),picture=new Image,picture.style.maxWidth="910px",picture.style.maxHeight="730px",photo=t.src,picture.src=photo,preview.appendChild(picture),number=value.indexOf(photo),currentNumber.textContent=""+(number+1)+" ",totalNumber.textContent=""+value.length+" ",doMini(),handlerOn())}for(var wrapperNode=document.querySelector(".wrapper"),img=wrapperNode.querySelectorAll("img"),show=document.querySelector(".show-image"),close=show.querySelector(".img-close"),preview=show.querySelector(".show-image-preview"),imgPreview=preview.querySelectorAll("img"),left=show.querySelector(".img-control-left"),right=show.querySelector(".img-control-right"),showBlock=show.querySelector(".show-block"),currentNumber=document.querySelector(".preview-number-current"),totalNumber=document.querySelector(".preview-number-total"),divWrapper=document.querySelector(".mini-wrapper"),miniPhotos=divWrapper.querySelectorAll(".mini-photo"),picture,photo,number,photoData=[].slice.call(img,0),value=[],i=0;i<img.length;i++)value.push(photoData[i].src);wrapperNode.addEventListener("click",showPhoto),close.addEventListener("click",handlerOf);